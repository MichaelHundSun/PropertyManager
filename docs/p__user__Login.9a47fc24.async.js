(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ObQG:function(B,x,a){B.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(B,x,a){"use strict";a.r(x);var ee=a("miYZ"),F=a("tsqr"),O=a("k1fw"),j=a("9og8"),M=a("tJVT"),ae=a("fOrg"),w=a("+KLJ"),$=a("WmNS"),l=a.n($),G=a("cJ7L"),C=a("FY4R"),J=a("3flX"),S=a("q1tI"),D=a("VMEa"),y=a("Qurx"),V=a("/aGu"),i=a("9kvl"),X=a("55Ip"),te=a("74pX");function K(h,g){return L.apply(this,arguments)}function L(){return L=Object(j.a)(l.a.mark(function h(g,f){return l.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(i.e)("/api/login/captcha",Object(O.a)({method:"POST",params:Object(O.a)({},g)},f||{})));case 1:case"end":return m.stop()}},h)})),L.apply(this,arguments)}var Q=a("ObQG"),n=a.n(Q),e=a("nKUr"),N=function(g){var f=g.content;return Object(e.jsx)(w.a,{style:{marginBottom:24},message:f,type:"error",showIcon:!0})},I=function(){!i.c||setTimeout(function(){var g=i.c.location.query,f=g,b=f.redirect;i.c.push(b||"/")},10)},R=function(){var g=Object(S.useState)(!1),f=Object(M.a)(g,2),b=f[0],m=f[1],Y=Object(S.useState)({}),T=Object(M.a)(Y,2),E=T[0],Z=T[1],H=Object(S.useState)("account"),W=Object(M.a)(H,1),P=W[0],U=Object(i.i)("@@initialState"),v=U.initialState,k=U.setInitialState,o=Object(i.h)(),q=function(){var d=Object(j.a)(l.a.mark(function s(){var r,c;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v==null||(r=v.fetchUserInfo)===null||r===void 0?void 0:r.call(v);case 2:c=t.sent,c&&k(Object(O.a)(Object(O.a)({},v),{},{currentUser:c}));case 4:case"end":return t.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),_=function(){var d=Object(j.a)(l.a.mark(function s(r){var c,p,t;return l.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return I(),u.abrupt("return");case 6:if(c=u.sent,c.status!=="ok"){u.next=14;break}return p=o.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),F.default.success(p),u.next=12,q();case 12:return I(),u.abrupt("return");case 14:Z(c),u.next=21;break;case 17:u.prev=17,u.t0=u.catch(3),t=o.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),F.default.error(t);case 21:m(!1);case 22:case"end":return u.stop()}},s,null,[[3,17]])}));return function(r){return d.apply(this,arguments)}}(),z=E.status,A=E.type;return Object(e.jsxs)("div",{className:n.a.container,children:[Object(e.jsx)("div",{className:n.a.lang,"data-lang":!0}),Object(e.jsxs)("div",{className:n.a.content,children:[Object(e.jsxs)("div",{className:n.a.top,children:[Object(e.jsx)("div",{className:n.a.header,children:Object(e.jsx)(X.a,{to:"/",children:Object(e.jsx)("span",{className:n.a.title,children:"\u56ED\u533A\u7EFC\u5408\u4FE1\u606F\u7BA1\u7406\u7CFB\u7EDF"})})}),Object(e.jsx)("div",{className:n.a.desc,children:"\u7528\u5FC3\u5BF9\u5F85\u6BCF\u4E00\u4F4D\u4E1A\u4E3B"})]}),Object(e.jsx)("div",{className:n.a.main,children:Object(e.jsxs)(D.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:o.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(s,r){return r.pop()},submitButtonProps:{loading:b,size:"large",style:{width:"100%"}}},onFinish:function(){var d=Object(j.a)(l.a.mark(function s(r){return l.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:_(r);case 1:case"end":return p.stop()}},s)}));return function(s){return d.apply(this,arguments)}}(),children:[z==="error"&&A==="account"&&Object(e.jsx)(N,{content:o.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design)"})}),P==="account"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(y.a,{name:"username",fieldProps:{size:"large",prefix:Object(e.jsx)(G.a,{className:n.a.prefixIcon})},placeholder:o.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:Object(e.jsx)(i.a,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),Object(e.jsx)(y.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(e.jsx)(C.a,{className:n.a.prefixIcon})},placeholder:o.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:Object(e.jsx)(i.a,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),z==="error"&&A==="mobile"&&Object(e.jsx)(N,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),P==="mobile"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(y.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(J.a,{className:n.a.prefixIcon})},name:"mobile",placeholder:o.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:Object(e.jsx)(i.a,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:Object(e.jsx)(i.a,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),Object(e.jsx)(V.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(C.a,{className:n.a.prefixIcon})},captchaProps:{size:"large"},placeholder:o.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(s,r){return s?"".concat(r," ").concat(o.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):o.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:Object(e.jsx)(i.a,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var d=Object(j.a)(l.a.mark(function s(r){var c;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K({phone:r});case 2:if(c=t.sent,c!==!1){t.next=5;break}return t.abrupt("return");case 5:F.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return t.stop()}},s)}));return function(s){return d.apply(this,arguments)}}()})]}),Object(e.jsx)("div",{style:{marginBottom:24}})]})})]})]})},se=x.default=R}}]);
